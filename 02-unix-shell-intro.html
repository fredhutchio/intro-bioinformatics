<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">

<title>Introduction to Bioinformatics</title>

<meta name="description" content="Introduction to Bioinformatics">

<!-- Disabled for now - embeds HTML in author string -->
<!--  <meta name="author" content="Lesson 2 - Unix Foundations" /> -->

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link rel="stylesheet" href="reveal.js/css/reveal.css">
  <link rel="stylesheet" href="src/theme/csmall.css" id="theme">


<!-- For syntax highlighting -->
  <link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">


<!-- If the query includes 'print-pdf', use the PDF print sheet -->
<script>
  document.write( '<link rel="stylesheet" href="reveal.js/css/print/' +
    ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) +
    '.css" type="text/css" media="print">' );
</script>

<!--[if lt IE 9]>
<script src="reveal.js/lib/js/html5shiv.js"></script>
<![endif]-->

<!-- Note escaped dollars -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
  </script>

</head>

<body>

<div class="reveal">

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">

<section>
<h1>Introduction to Bioinformatics</h1>
<h3>Lesson 2 - Unix Foundations</h3>
<p>
<h4></h4>
</p>
</section>


<section id="the-shell" class="level1">
<h1>The Shell</h1>
<section id="shell-bioinformatician-water-fish" class="level2">
<h2>Shell : Bioinformatician   ::   Water : Fish</h2>
<p><br/></p>
<ul>
<li>Philosophy</li>
<li>Tools</li>
<li>Cluster computing</li>
</ul>
</section>
</section>
<section id="the-unix-philosophy" class="level1">
<h1>The Unix Philosophy</h1>
<ul>
<li>Small, composable tools that do one thing right</li>
<li>Plumb tools together into pipelines/scripts</li>
<li>Embrace plain text/data</li>
</ul>
<p>This gives us a lot of power.</p>
</section>
<section id="lets-break-things-down-a-bit" class="level1">
<h1>Let’s break things down a bit</h1>
</section>
<section id="directories-files-and-paths-oh-my" class="level1">
<h1>Directories, files and paths, oh my!</h1>
<p>In which we see the static world of things.</p>
</section>
<section id="in-unix-almost-everything-is-a-file" class="level1">
<h1>In Unix, (almost) everything is a file</h1>
<ul>
<li>programs</li>
<li>devices</li>
<li>/dev/null</li>
<li>etc.</li>
</ul>
</section>
<section id="and-files-have-paths" class="level1">
<h1>And files have <strong>paths</strong></h1>
<p>Paths are the addresses for files, and are based on <em>directories</em>.</p>
</section>
<section id="directories-aka-folders-are-containers" class="level1">
<h1>Directories (aka “folders”) are containers</h1>
<section id="for-more-directories-and-files" class="level2">
<h2>…for more directories and files…</h2>
</section>
</section>
<section id="some-special-paths-directories" class="level1">
<h1>Some special paths &amp; directories:</h1>
<ul>
<li><code>/</code> - The “root” of the filesystem; everything lives here</li>
<li><code>.</code> - Current directory (depends on where you are)</li>
<li><code>..</code> - Parent directory (depends on where you are)</li>
<li><code>~</code> - Home directory</li>
</ul>
</section>
<section id="how-paths-work" class="level1">
<h1>How paths work</h1>
<p>If we have a directory called <code>bioinfclass</code> in the directory <code>~</code>, the path to this directory is <code>~/bioinfclass</code>.</p>
<p>If <code>bioinfclass</code> has a subdirectory called <code>data</code>, it’s path is <code>~/bioinfclass/data</code>.</p>
</section>
<section id="path-tools" class="level1">
<h1>Path tools</h1>
<ul>
<li>change directories with <code>cd</code></li>
<li>list directory contents with <code>ls</code></li>
<li>see where we are with <code>pwd</code></li>
</ul>
</section>
<section id="example-using-path-tools" class="level1">
<h1>Example: Using path tools</h1>
<pre><code>cd ~

pwd

# list the contents of this directory
ls bioinfclass/data

cd bioinfclass

pwd

ls data</code></pre>
</section>
<section id="exercise-going-up-the-directory-chain" class="level1">
<h1>Exercise: going up the directory chain</h1>
<p>Try</p>
<pre><code>ls ..

ls ../..

cd /</code></pre>
<p><strong>Excecise:</strong> Where are we now? How can we get back to our home directory?</p>
</section>
<section id="we-can-change-the-path-of-a-file-using-mv" class="level1">
<h1>We can change the path of a file using <code>mv</code></h1>
<pre><code>mv bioinfclass/data foobar

ls

ls foobar

ls bioinfclass</code></pre>
<p><strong>Excercise:</strong> How do we get <code>data</code> back?</p>
</section>
<section id="mv-is-for-renaming-as-well" class="level1">
<h1><code>mv</code> is for renaming as well</h1>
<p>If the directory of the file is the same, we just <em>rename</em> the file, but the command stays the same.</p>
<pre><code>mv bioinfclass foobar

ls

mv foobar bioinfclass</code></pre>
</section>
<section id="we-can-make-new-directories-or-files-with-mkdir-and-touch" class="level1">
<h1>We can make new directories or files with <code>mkdir</code> and <code>touch</code></h1>
<ul>
<li><code>mkdir name</code> will create a directory <code>name</code></li>
<li><code>touch name</code> will create a file <code>name</code></li>
</ul>
<p> </p>
<p><strong>Exercise:</strong> create a file in a subdirectory from your home directory</p>
</section>
<section id="commands" class="level1">
<h1>Commands</h1>
<p>In which the things take flight and evolve!</p>
</section>
<section id="anatomy-of-a-unix-command" class="level1">
<h1>Anatomy of a Unix command</h1>
<p><code>command [flags] [operands]</code></p>
<ul>
<li>command: name of the program</li>
<li>operands: positional based arguments
<ul>
<li>often but not always required</li>
</ul></li>
<li>flags: named based arguments
<ul>
<li>position frequently ignored</li>
<li>usually for controlling details of program behavior</li>
<li>often not required</li>
<li>sometimes take arguments, sometimes not</li>
</ul></li>
</ul>
</section>
<section id="more-on-flag-shape" class="level1">
<h1>More on flag shape</h1>
<ul>
<li>sometimes single dash and character (like <code>-h</code>)</li>
<li>sometimes double dash and word (like <code>--help</code>)</li>
<li>sometimes single dash and word (like <code>-help</code>; esp Java programs)</li>
<li>sometimes there are short and long options (like <code>-h</code> or <code>--help</code>)</li>
<li>sometimes short flags can be munged together (<code>-v -x -f the-file</code> == <code>-vxf the-file</code>)</li>
</ul>
</section>
<section id="help-with-flags" class="level1">
<h1>Help with flags</h1>
<pre><code>ls --help
</code></pre>
</section>
<section id="getting-help-with-man-and-apropos" class="level1">
<h1>Getting help with <code>man</code> and <code>apropos</code></h1>
<p>There is built in help on the command line:</p>
<ul>
<li>Try <code>man ls</code> (arrows to scroll, q to quit)</li>
<li>Try <code>apropos calculator</code></li>
</ul>
</section>
<section id="programs-are-just-files" class="level1">
<h1>Programs are just files!</h1>
<pre><code>which tree

# -l: &quot;long&quot; list output; lots of info that we will ignore except for `x` presence/absence
ls -l /usr/bin/tree

# super secret shortcut
ls -l $(which tree)

touch testfile

# Notice no x; not executable...
ls -l testfile</code></pre>
</section>
<section id="what-else-is-in-usrbin" class="level1">
<h1>What else is in <code>/usr/bin</code>?</h1>
<p><code>ls /usr/bin</code> =&gt; LOTS OF STUFF!</p>
<p>This is one of the many places your shell looks for programs</p>
</section>
<section id="how-does-the-shell-know-where-to-look-for-programs" class="level1">
<h1>How does the shell know where to look for programs?</h1>
<p><code>echo $PATH</code> =&gt; <code>:</code> separated list of places your shell looks for programs.</p>
<p>This can be edited if you want to let your shell know to look other places as well (see <code>.bashrc</code>)</p>
</section>
<section id="pipes-and-streams" class="level1">
<h1>Pipes and streams</h1>
<p>In which our constructions in flight don tongues and communicate!</p>
</section>
<section id="a-bit-about-std-files" class="level1">
<h1>A bit about <code>std</code> files</h1>
<p>There are three special files that programs often read from and write to by default to facilitate composability:</p>
<p><a href="figures/stdfiles.svg" target="_blank"><img src="figures/stdfiles.svg" height="300"></a></p>
<p>For the most part we’ll ignore <code>stderr</code>…</p>
</section>
<section id="by-default-stdout-gets-printed-to-the-screen" class="level1">
<h1>By default, stdout gets printed to the screen</h1>
<section id="but-we-can-redirect-stdout-to-a-file-using" class="level2">
<h2>But we can <em>redirect</em> stdout to a file using <code>&gt;</code></h2>
<p><code>Program</code> vs <code>Program &gt; out-file</code></p>
<p><a href="figures/redirect.svg" target="_blank"><img src="figures/redirect.svg" height="300"></a></p>
</section>
</section>
<section id="example-of-redirection" class="level1">
<h1>Example of redirection</h1>
<p><code>FastTree -nt output/alignment.fasta</code></p>
<p>vs</p>
<p><code>FastTree -nt output/alignment.fasta &gt; output/tree.nw</code></p>
<p> </p>
<p>[if your shell can’t see FastTree,<br />don’t forget to <code>module load intro-bio</code>!]</p>
</section>
<section id="we-can-also-stdout-of-one-command-to-stdin-of-another" class="level1">
<h1>We can also <code>|</code> <code>stdout</code> of one command to <code>stdin</code> of another</h1>
<p><code>Prog1 | Prog2</code>:</p>
<p><a href="figures/pipe.svg" target="_blank"><img src="figures/pipe.svg" height="300"></a></p>
</section>
<section id="example" class="level1">
<h1>Example</h1>
<p><code>column -t -s , data/svf.csv | less -S</code></p>
<ul>
<li><code>column</code> writes it’s output to <code>stdout</code></li>
<li><code>less</code> reads from <code>/dev/stdin</code> if no file is specified</li>
</ul>
</section>
<section id="section" class="level1">
<h1></h1>
<p>Programs have to <em>know</em> to use stdin / stdout for this to work. Some conventions:</p>
<ul>
<li>Assume first argument is input, second output</li>
<li>If only one argument is specified, output to <code>stdout</code></li>
<li>If no arguments specified, input from <code>stdin</code>, output to <code>stdout</code></li>
<li>Sometimes there is no “output” argument; assume <code>stdout</code></li>
<li>Sometimes programs treat <code>-</code> as a shortcut for <code>stdin</code></li>
<li>When all else fails, you can read from &amp; write to <code>/dev/stdout</code>, <code>/dev/stdin</code> directly</li>
</ul>
</section>
<section id="practicum" class="level1">
<h1>Practicum!</h1>
<p>In which we apply our knowledge of these flying, speaking beasts.</p>
</section>
<section id="lets-look-at-our-csv-data-a-bit-more" class="level1">
<h1>Let’s look at our CSV data a bit more</h1>
</section>
<section id="head-first" class="level1">
<h1>Head first…</h1>
<pre><code>head data/sfv.csv

column -t -s , data/sfv.csv | head</code></pre>
</section>
<section id="how-many-humans-are-there" class="level1">
<h1>How many humans are there?</h1>
<pre><code>grep human data/sfv.csv | wc -l

grep monkey data/sfv.csv | wc -l</code></pre>
</section>
<section id="another-way-we-could-do-these-together" class="level1">
<h1>Another way we could do these together</h1>
<p>How many sequences are there for each species?</p>
<pre><code>cut -d , -f 3 data/sfv.csv | sort | uniq -c</code></pre>
</section>
<section id="how-about-how-many-specimens-there-are-per-species" class="level1">
<h1>How about how many specimens there are per species?</h1>
<pre><code># First, uniq specimens, with species info
cut -d , -f 2,3 data/sfv.csv | sort | uniq | head

# Next count that by species
cut -d , -f 2,3 data/sfv.csv | sort | uniq | cut -d , -f 2 | sort | uniq -c</code></pre>
</section>
<section id="what-about-specimens-by-location" class="level1">
<h1>What about specimens by location?</h1>
<pre><code>cut -d , -f 2,3,5 data/sfv.csv | sort | uniq | cut -d , -f 2,3 | sort | uniq -c</code></pre>
<p>Super powerful and fast.</p>
</section>
<section id="is-anyone-else-getting-tired-of-all-this--d--f-235-business" class="level1">
<h1>Is anyone else getting tired of all this <code>-d , -f 2,3,5</code> business?</h1>
<section id="enter-csvkit" class="level2">
<h2>Enter <code>csvkit</code></h2>
<p>We have <code>csv...</code> versions of many of the standard Unix utils:</p>
<p><code>csvcut</code>, <code>csvgrep</code>, <code>csvjoin</code>, <code>csvlook</code>, <code>csvsort</code>, <code>csvstack</code>, <code>csvstat</code></p>
</section>
</section>
<section id="advantages-of-csvkit" class="level1">
<h1>Advantages of csvkit</h1>
<ul>
<li>Can use header names, not just indices</li>
<li>Don’t have to specify <code>-s ,</code>/<code>-d ,</code> every time</li>
<li>Headers are treated separately from the data</li>
</ul>
</section>
<section id="looking-at-just-the-human-sequences" class="level1">
<h1>Looking at just the human sequences</h1>
<pre><code>csvgrep -c species -m human data/sfv.csv | csvlook | less -S</code></pre>
</section>
<section id="the-one-missing-piece-csvuniq" class="level1">
<h1>The one missing piece: csvuniq</h1>
<pre><code># ~/bin is one of the places we can put programs
mkdir ~/bin

wget https://goo.gl/ZdNoUL -O ~/bin/csvuniq

# Need to let the shell know this should be executable
chmod +x ~/bin/csvuniq

# Have to install some dependencies
R
install.packages(c(&#39;optparse&#39;, &#39;plyr&#39;))</code></pre>
</section>
<section id="now-lets-see-what-our-example-looks-like" class="level1">
<h1>Now let’s see what our example looks like:</h1>
<pre><code>csvuniq -c specimen,species,location data/sfv.csv | csvuniq -zc species,location | csvlook</code></pre>
<p>Notice that <code>csvuniq</code> does all of the sorting and cutting for us…</p>
</section>
<section id="lets-finish-our-example-from-last-week" class="level1">
<h1>Let’s finish our example from last week</h1>
</section>
<section id="first-lets-take-a-look-at-our-alignment" class="level1">
<h1>First let’s take a look at our alignment</h1>
<section id="always-do-this" class="level2">
<h2>Always do this!</h2>
<pre><code># We&#39;ll use the `alnvu` program
av -L 99999 -w 99999 -c output/alignment.fasta | less -S</code></pre>
</section>
</section>
<section id="now-we-can-look-at-our-tree" class="level1">
<h1>Now we can look at our tree</h1>
<pre><code>FastTree -nt output/alignment.fasta &gt; output/tree.nw

nw_display output/tree.nw | less -S</code></pre>
</section>
<section id="feedback" class="level1">
<h1>Feedback</h1>
<p>Was last week too much? Would having taken things more slowly and foundationally like today have helped things?</p>
</section>
<section id="resources" class="level1">
<h1>Resources</h1>
<ul>
<li>These slides: <a href="http://fredhutchio.github.io/intro-bioinformatics" class="uri">http://fredhutchio.github.io/intro-bioinformatics</a></li>
<li>Unix command reference: <a href="https://ubuntudanmark.dk/filer/fwunixref.pdf" class="uri">https://ubuntudanmark.dk/filer/fwunixref.pdf</a></li>
</ul>
</section>
</div>

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.min.js"></script>

<script>
  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: false,


    rollingLinks: false,
  
  // available themes are in /css/theme
      theme: Reveal.getQueryHash().theme || 'csmall',
  
  // default/cube/page/concave/zoom/linear/fade/none
      transition: Reveal.getQueryHash().transition || 'fade',
  
  // Optional libraries used to extend on reveal.js
  dependencies: [
    { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
    { src: 'reveal.js/plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
    { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
    { src: 'MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML'}
    // { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
    // { src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
  });
Reveal.addEventListener( 'slidechanged', function( event ) {
    MathJax.Hub.Rerender();
} );
</script>

</body>
</html>
